{"version":3,"sources":["../../../../../assets/scripts/util/assets/scripts/util/NetControl.js"],"names":["window","onfire","require","netConfig","NetControl","_sock","connect","readyState","WebSocket","host","onopen","_onOpen","bind","onclose","_onClose","onmessage","_onMessage","fire","err","obj","send","msg","console","log","f","module","exports"],"mappings":";;;;;;AAAA;;;AAGA;AACAA,OAAOC,MAAP,GAAcC,QAAQ,QAAR,CAAd,EAA2C;AAC3C,IAAIC,YAAUD,QAAQ,WAAR,CAAd;AACA,IAAIE,aAAW;AACXC,WAAM,EADK,EACA;AACXC,aAAS,mBAAY;AACjB,YAAG,KAAKD,KAAL,CAAWE,UAAX,KAAwB,CAA3B,EAA6B;AACzB;AACA;AACA,iBAAKF,KAAL,GAAa,IAAIG,SAAJ,CAAcL,UAAUM,IAAxB,CAAb;AACA,iBAAKJ,KAAL,CAAWK,MAAX,GAAoB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAApB;AACA,iBAAKP,KAAL,CAAWQ,OAAX,GAAqB,KAAKC,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAArB;AACA,iBAAKP,KAAL,CAAWU,SAAX,GAAuB,KAAKC,UAAL,CAAgBJ,IAAhB,CAAqB,IAArB,CAAvB;AACH;AACD,eAAO,IAAP;AACH,KAZU;;AAcXD,aAAQ,mBAAU;AACdV,eAAOgB,IAAP,CAAY,QAAZ;AACH,KAhBU;AAiBXH,cAAS,kBAASI,GAAT,EAAa;AAClBjB,eAAOgB,IAAP,CAAY,SAAZ,EAAsBC,GAAtB;AACH,KAnBU;AAoBXF,gBAAW,oBAASG,GAAT,EAAa;;AAEpBlB,eAAOgB,IAAP,CAAY,WAAZ,EAAwBE,GAAxB;AACH,KAvBU;;AAyBXC,UAAK,cAASC,GAAT,EAAa;AACd,aAAKhB,KAAL,CAAWe,IAAX,CAAgBC,GAAhB;AACAC,gBAAQC,GAAR,CAAY,aAAWF,GAAvB;AACH,KA5BU;AA6BXN,eAAU,mBAASS,CAAT,EAAW;AACjB,aAAKnB,KAAL,CAAWU,SAAX,CAAqBS,CAArB;AACH;;AA/BU,CAAf;;AAmCAC,OAAOC,OAAP,GAAetB,UAAf","file":"NetControl.js","sourceRoot":"../../../../../assets/scripts/util","sourcesContent":["/**\n * Created by Administrator on 2018/4/17 0017.\n */\n//定义全局的变量\nwindow.onfire=require(\"onfire\");           //处理事件的类库\nvar netConfig=require('NetConfig');\nvar NetControl={\n    _sock:{},  //当前的webSocket的对象\n    connect: function () {\n        if(this._sock.readyState!==1){\n            //当前接口没有打开\n            //重新连接\n            this._sock = new WebSocket(netConfig.host);\n            this._sock.onopen = this._onOpen.bind(this);\n            this._sock.onclose = this._onClose.bind(this);\n            this._sock.onmessage = this._onMessage.bind(this);\n        }\n        return this;\n    },\n\n    _onOpen:function(){\n        onfire.fire(\"onopen\");\n    },\n    _onClose:function(err){\n        onfire.fire(\"onclose\",err);\n    },\n    _onMessage:function(obj){\n\n        onfire.fire(\"onmessage\",obj);\n    },\n\n    send:function(msg){\n        this._sock.send(msg);\n        console.log(\"send msg\"+msg);\n    },\n    onmessage:function(f){\n        this._sock.onmessage(f);\n    },\n\n};\n\nmodule.exports=NetControl;"]}