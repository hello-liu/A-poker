{"version":3,"sources":["../../../../assets/scripts/assets/scripts/hall.js"],"names":["cc","Class","extends","Component","properties","prefab_table_1v1","default","type","Prefab","prefab_table_2v2","content","Node","list_bt","Button","notice_bt","create_bt","single_bt","double_bt","set_bt","out_bt","update","onMessage","obj","data","JSON","parse","code","console","log","onfire","clear","onLoad","global","require","netControl","msssageFire","on","bind","send","scheduleOnce","init_table","init_table_position","node","on_out_bt","director","preloadScene","i","j","table_name","table","find","setPosition","x","y","instantiate","name","getChildByName","getComponent","Label","string","parent","close","loadScene","start"],"mappings":"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","file":"hall.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        prefab_table_1v1: {\n            default: null,\n            type: cc.Prefab\n        },\n        prefab_table_2v2: {\n            default: null,\n            type: cc.Prefab\n        },\n        content: {\n            default: null,\n            type: cc.Node\n        },\n        list_bt : cc.Button, //\n        notice_bt : cc.Button, //\n        create_bt : cc.Button, //\n        single_bt : cc.Button, //\n        double_bt : cc.Button, //\n        set_bt : cc.Button, //\n        out_bt : cc.Button, //\n    },\n\n    update(){\n        // var table_1_ = cc.find(\"Canvas/rooms/view/content/table_1\");\n        // table_1_.x = table_1_.x+100;\n    },\n\n    onMessage(obj){\n        var data = JSON.parse (obj.data);                  \n        // console.log(data);\n  \n        if(data && data.code == 'hall'){\n            //大厅消息\n            console.log(data);\n            onfire.clear();\n        }\n\n    },\n\n    onLoad () {\n        this.global = require('./global');\n        this.netControl = require('./util/NetControl');\n        //绑定消息事件\n        this.msssageFire=onfire.on(\"onmessage\",this.onMessage.bind(this));\n\n        this.netControl.send('{\"method\":\"tables\"}')\n        \n\n        this.scheduleOnce(function(){\n            this.init_table();\n            this.init_table_position();\n        },0);\n        this.out_bt.node.on('click',this.on_out_bt,this);\n\n        //预加载场景\n        cc.director.preloadScene('hall');\n    },\n    init_table_position(){\n\n        for(var i=0; i<3; i++){\n            for(var j=0; j<1; j++){\n                var table_name = \"table_1v1_\" + (j*3 + i ) \n                var table = cc.find(\"Canvas/rooms/view/content/\"+table_name);\n                table.setPosition(table.x + i*350 -350, table.y - j*350 -200);\n            }\n        }\n        \n        for(var i=0; i<3; i++){\n            for(var j=0; j<3; j++){\n                var table_name = \"table_2v2_\" + (j*3 + i ) \n                var table = cc.find(\"Canvas/rooms/view/content/\"+table_name);\n                table.setPosition(table.x + i*350 -350, table.y - j*350 -350 - 200);\n            }\n        }\n        \n    },\n    init_table(){\n\n        for(var i=0; i<3; i++){\n            for(var j=0; j<1; j++){\n                var table = cc.instantiate(this.prefab_table_1v1);\n                table.name = \"table_1v1_\" + (j*3 + i ) ;\n                var name = table.getChildByName('name');\n                name.getComponent(cc.Label).string = \"1v1_\" + (j*3 + i );\n                table.parent = this.content;\n            }\n        }\n\n        for(var i=0; i<3; i++){\n            for(var j=0; j<3; j++){\n                var table = cc.instantiate(this.prefab_table_2v2);\n                table.name = \"table_2v2_\" + (j*3 + i ) ;\n                var name = table.getChildByName('name');\n                name.getComponent(cc.Label).string = \"2v2_\" + (j*3 + i );\n                table.parent = this.content ;\n            }\n        }\n        \n    },\n\n    on_out_bt(){\n        var netControl = require('./util/NetControl');\n        netControl.close();        \n        cc.director.loadScene('index');\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}