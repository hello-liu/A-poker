{"version":3,"sources":["onfire.js"],"names":["root","factory","module","exports","onfire","window","__onfireEvents","__cnt","string_str","function_str","hasOwnKey","Function","call","bind","Object","hasOwnProperty","slice","Array","prototype","_bind","eventName","callback","is_one","context","Error","_each","obj","key","on","one","_fire_func","args","item","apply","fire","arguments","setTimeout","fireSync","un","event","r","type","key_1","item_1","key_2","item_2","clear"],"mappings":"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","file":"onfire.js","sourceRoot":"../../../../../assets/scripts/util","sourcesContent":["/**\n * Created by Administrator on 2018/4/17 0017.\n */\n/**\n Copyright (c) 2016 hustcc http://www.atool.org/\n License: MIT\n https://github.com/hustcc/onfire.js\n **/\n/* jshint expr: true */\n!function (root, factory) {\n    if (typeof module === 'object' && module.exports)\n        module.exports = factory();\n    else\n        root.onfire = factory();\n}(typeof window !== 'undefined' ? window : this, function () {\n    var __onfireEvents = {},\n        __cnt = 0, // evnet counter\n        string_str = 'string',\n        function_str = 'function',\n        hasOwnKey = Function.call.bind(Object.hasOwnProperty),\n        slice = Function.call.bind(Array.prototype.slice);\n\n    function _bind(eventName, callback, is_one, context) {\n        if (typeof eventName !== string_str || typeof callback !== function_str) {\n            throw new Error('args: '+string_str+', '+function_str+'');\n        }\n        if (! hasOwnKey(__onfireEvents, eventName)) {\n            __onfireEvents[eventName] = {};\n        }\n        __onfireEvents[eventName][++__cnt] = [callback, is_one, context];\n\n        return [eventName, __cnt];\n    }\n    function _each(obj, callback) {\n        for (var key in obj) {\n            if (hasOwnKey(obj, key)) callback(key, obj[key]);\n        }\n    }\n    /**\n     *  onfire.on( event, func, context ) -> Object\n     *  - event (String): The event name to subscribe / bind to\n     *  - func (Function): The function to call when a new event is published / triggered\n     *  Bind / subscribe the event name, and the callback function when event is triggered, will return an event Object\n     **/\n    function on(eventName, callback, context) {\n        return _bind(eventName, callback, 0, context);\n    }\n    /**\n     *  onfire.one( event, func, context ) -> Object\n     *  - event (String): The event name to subscribe / bind to\n     *  - func (Function): The function to call when a new event is published / triggered\n     *  Bind / subscribe the event name, and the callback function when event is triggered only once(can be triggered for one time), will return an event Object\n     **/\n    function one(eventName, callback, context) {\n        return _bind(eventName, callback, 1, context);\n    }\n    function _fire_func(eventName, args) {\n        if (hasOwnKey(__onfireEvents, eventName)) {\n            _each(__onfireEvents[eventName], function(key, item) {\n                item[0].apply(item[2], args); // do the function\n                if (item[1]) delete __onfireEvents[eventName][key]; // when is one, delete it after triggle\n            });\n        }\n    }\n    /**\n     *  onfire.fire( event[, data1 [,data2] ... ] )\n     *  - event (String): The event name to publish\n     *  - data...: The data to pass to subscribers / callbacks\n     *  Async Publishes / fires the the event, passing the data to it's subscribers / callbacks\n     **/\n    function fire(eventName) {\n        // fire events\n        var args = slice(arguments, 1);\n        setTimeout(function () {\n            _fire_func(eventName, args);\n        });\n    }\n    /**\n     *  onfire.fireSync( event[, data1 [,data2] ... ] )\n     *  - event (String): The event name to publish\n     *  - data...: The data to pass to subscribers / callbacks\n     *  Sync Publishes / fires the the event, passing the data to it's subscribers / callbacks\n     **/\n    function fireSync(eventName) {\n        _fire_func(eventName, slice(arguments, 1));\n    }\n    /**\n     * onfire.un( event ) -> Boolean\n     *  - event (String / Object): The message to publish\n     * When passed a event Object, removes a specific subscription.\n     * When passed event name String, removes all subscriptions for that event name(hierarchy)\n     *\n     * Unsubscribe / unbind an event or event object.\n     *\n     * Examples\n     *\n     *  // Example 1 - unsubscribing with a event object\n     *  var event_object = onfire.on('my_event', myFunc);\n     *  onfire.un(event_object);\n     *\n     *  // Example 2 - unsubscribing with a event name string\n     *  onfire.un('my_event');\n     **/\n    function un(event) {\n        var eventName, key, r = false, type = typeof event;\n        if (type === string_str) {\n            // cancel the event name if exist\n            if (hasOwnKey(__onfireEvents, event)) {\n                delete __onfireEvents[event];\n                return true;\n            }\n            return false;\n        }\n        else if (type === 'object') {\n            eventName = event[0];\n            key = event[1];\n            if (hasOwnKey(__onfireEvents, eventName) && hasOwnKey(__onfireEvents[eventName], key)) {\n                delete __onfireEvents[eventName][key];\n                return true;\n            }\n            // can not find this event, return false\n            return false;\n        }\n        else if (type === function_str) {\n            _each(__onfireEvents, function(key_1, item_1) {\n                _each(item_1, function(key_2, item_2) {\n                    if (item_2[0] === event) {\n                        delete __onfireEvents[key_1][key_2];\n                        r = true;\n                    }\n                });\n            });\n            return r;\n        }\n        return true;\n    }\n    /**\n     *  onfire.clear()\n     *  Clears all subscriptions\n     **/\n    function clear() {\n        __onfireEvents = {};\n    }\n    return {\n        on: on,\n        one: one,\n        un: un,\n        fire: fire,\n        fireSync: fireSync,\n        clear: clear\n    };\n});"]}